{"version":3,"file":"lib_index_js.1c50dca4ba82a695f3ac.js","mappings":"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","sources":["webpack://apex-dag/./src/index.ts","webpack://apex-dag/./src/widget.tsx"],"sourcesContent":["import {\n  JupyterFrontEnd,\n  JupyterFrontEndPlugin\n} from '@jupyterlab/application';\nimport { MainAreaWidget } from '@jupyterlab/apputils';\nimport { ILauncher } from '@jupyterlab/launcher';\nimport { reactIcon } from '@jupyterlab/ui-components';\nimport { GraphWidget } from './widget';\n\nnamespace CommandIDs {\n  export const create = 'apex-dag-widget';\n}\n\n/**\n * Initialization data for the apex-dag extension.\n */\nconst plugin: JupyterFrontEndPlugin<void> = {\n  id: 'apex-dag:plugin',\n  description: 'APEX-DAG Jupyter Lab Extension',\n  autoStart: true,\n  optional: [ILauncher],\n  activate: (app: JupyterFrontEnd, launcher: ILauncher) => {\n    const { commands } = app;\n\n    const command = CommandIDs.create;\n    commands.addCommand(command, {\n      caption: 'APEX-DAG',\n      label: 'APEX-DAG Widget',\n      icon: args => (args['isPalette'] ? undefined : reactIcon),\n      execute: () => {\n        const content = new GraphWidget();\n        const widget = new MainAreaWidget<GraphWidget>({ content });\n        widget.title.label = 'APEX-DAG';\n        widget.title.icon = reactIcon;\n        app.shell.add(widget, 'main');\n      }\n    });\n\n    if (launcher) {\n      launcher.add({\n        command\n      });\n    }\n  }\n};\n\nexport default plugin;\n","import { ReactWidget } from '@jupyterlab/ui-components';\nimport React, {useEffect, useRef, useState} from 'react';\nimport cytoscape from \"cytoscape\";\nimport dagre from \"cytoscape-dagre\";\n\ncytoscape.use(dagre);\n\n/**\n * React component for a counter.\n *\n * @returns The React component\n */\nconst GraphComponent = ({ graphData = {elements: []} }): JSX.Element => {\n    const layout = {\n        name: \"dagre\",\n        rankDir: \"TB\",\n    };\n\n    const colors = {\n        light_steel_blue: \"#B0C4DE\",\n        very_soft_blue: \"#b3b0de\",\n        pink: \"#FFC0CB\",\n        light_green: \"#c4deb0\",\n        very_soft_yellow: \"#DEDAB0\",\n        very_soft_purple: \"#DEB0DE\",\n        very_soft_lime_green: \"#B0DEB9\",\n        light_salmon: \"#FFA07A\",\n        pale_green: \"#98FB98\",\n        gray: \"#d3d3d3\",\n        powder_blue: \"#B0E0E6\",\n        peach_puff: \"#FFDAB9\",\n    };\n\n    const legendItems = [\n        { type: \"node\", color: colors.light_steel_blue, label: \"Variable\", borderStyle: \"solid\" },\n        { type: \"node\", color: colors.very_soft_blue, label: \"Intermediate\", borderStyle: \"solid\" },\n        { type: \"node\", color: colors.light_green, label: \"Function\", borderStyle: \"solid\" },\n        { type: \"node\", color: colors.pink, label: \"Import\", borderStyle: \"solid\" },\n        { type: \"node\", color: colors.very_soft_yellow, label: \"If\", borderStyle: \"solid\" },\n        { type: \"node\", color: colors.very_soft_lime_green, label: \"Loop\", borderStyle: \"solid\" },\n        { type: \"node\", color: colors.very_soft_purple, label: \"Class\", borderStyle: \"solid\" },\n        { type: \"edge\", color: colors.light_salmon, label: \"Caller\", borderStyle: \"solid\" },\n        { type: \"edge\", color: colors.gray, label: \"Reassign\", borderStyle: \"dashed\" },\n        { type: \"edge\", color: colors.pale_green, label: \"Input\", borderStyle: \"solid\" },\n        { type: \"edge\", color: colors.powder_blue, label: \"Branch\", borderStyle: \"solid\" },\n        { type: \"edge\", color: colors.peach_puff, label: \"Loop\", borderStyle: \"solid\" },\n        { type: \"edge\", color: colors.light_green, label: \"Function\", borderStyle: \"solid\" }\n    ];\n    \n    const edgeType = (element: cytoscape.SingularElementReturnValue) => {\n        const caseType = element.data(\"edge_type\");\n        switch (caseType) {\n        case 0: return colors.light_salmon;\n        case 1: return colors.pale_green;\n        case 2: return colors.gray;\n        case 3: return colors.powder_blue;\n        case 4: return colors.peach_puff;\n        case 5: return colors.light_green;\n        default: return \"#000\";\n        }\n    };\n\n    const nodeType = (element: cytoscape.SingularElementReturnValue) => {\n        const caseType = element.data(\"node_type\");\n        switch (caseType) {\n        case 0: return colors.light_steel_blue;\n        case 1: return colors.pink;\n        /*case 2: return colors.light_green; <- not used yet*/\n        case 3: return colors.light_green;\n        case 4: return colors.very_soft_blue;\n        case 5: return colors.very_soft_yellow;\n        case 6: return colors.very_soft_lime_green;\n        case 7: return colors.very_soft_purple;\n        default: return \"#000\";\n        }\n    };\n\n    const lineType = (element: cytoscape.SingularElementReturnValue) => {\n        const caseType = element.data(\"edge_type\");\n        switch (caseType) {\n        case 2: return \"dashed\";\n        default: return \"solid\";\n        }\n    };\n\n    const style = [{\n        selector: \"node\",\n        style: {\n            \"shape\": \"round-rectangle\",\n            \"background-color\": (element: cytoscape.SingularElementReturnValue) => nodeType(element),\n            \"label\": \"data(label)\",\n            \"width\": \"60px\",\n            \"height\": \"35px\",\n            \"text-valign\": \"center\" as \"center\" | \"top\" | \"bottom\",\n            \"text-halign\": \"center\" as \"center\" | \"left\" | \"right\",\n            \"font-size\": \"12px\",\n            \"color\": \"#333\"\n            }\n        },\n        {\n            selector: \"edge\",\n            style: {\n                \"width\": 2,\n                \"line-color\": (element: cytoscape.SingularElementReturnValue) => edgeType(element),\n                \"target-arrow-shape\": \"triangle\",\n                \"target-arrow-color\": (element: cytoscape.SingularElementReturnValue) => edgeType(element),\n                \"curve-style\": \"bezier\",\n                \"label\": \"data(label)\",\n                \"line-style\": (element: cytoscape.SingularElementReturnValue) => lineType(element) as \"solid\" | \"dashed\",\n            }\n        }\n    ];\n\n    const graphRef = useRef(null);\n    const [pan, setPan] = useState<cytoscape.Position | null>(null);\n    const [zoom, setZoom] = useState(1);\n\n    const drawGraph = () => {\n        const cy = cytoscape({\n            container: graphRef.current,\n            style: style,\n            layout: layout,\n            elements: graphData.elements,\n        });\n        \n        if (pan) {\n            cy.pan(pan);\n        } else {\n            console.log(\"Centering the graph\");\n            cy.center();\n        }\n        cy.zoom(zoom);\n        cy.on('pan', () => {\n            setPan(cy.pan());\n        });\n\n        cy.on('zoom', () => {\n            setZoom(cy.zoom());\n        });\n\n        setPan(cy.pan());\n        setZoom(cy.zoom());\n    };\n       \n    useEffect(() => {\n        drawGraph()\n    }, [graphData]);\n\n    return (\n        <>\n            <div id=\"cy\" ref={graphRef}></div>\n            <ul className=\"legend\">\n                {legendItems.map((item, index) => (\n                <li key={index}>\n                    <div className={item.type} style={{ backgroundColor: item.color, borderColor: item.color, borderStyle: item.borderStyle }}></div> {item.label}\n                </li>\n                ))}\n            </ul>\n        </>\n    );\n}\n\n\n/**\n * A widget that displays a graph.\n */\nexport class GraphWidget extends ReactWidget {\n\n  constructor() {\n    super();\n    this.addClass('jp-react-widget');\n  }\n\n  render(): JSX.Element {\n    return <GraphComponent />;\n  }\n}"],"names":[],"sourceRoot":""}